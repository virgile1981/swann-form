(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"4mMJ":function(e,t,r){"use strict";r.d(t,"a",function(){return c});var s=r("3Pt+"),i=r("Vx+w"),n=r("fXoL"),o=r("HzuS"),a=r("ofXK");function l(e,t){if(1&e){const e=n.Nb();n.Mb(0,"div",3),n.Kb(1,"img",4),n.Mb(2,"button",5),n.Tb("click",function(){n.Zb(e);const r=t.$implicit;return n.Vb().clearInputImage(r)}),n.ec(3," x "),n.Lb(),n.Lb()}if(2&e){const e=t.$implicit;n.zb(1),n.Wb("src","data:"+e.type+";base64,"+e.buffer,n.ac)}}let c=(()=>{class e{constructor(e,t){this.host=e,this.dataUtils=t,this.file=null,this.limitSize=i.a.filetoupload.maxsize,this.currentSize=0,this.showError=!1,this.files=[]}emitFiles(e){const t=e&&e.item(0),r=this;this.dataUtils.toBase64(t,e=>{const s={lastMod:t.lastModified,buffer:e,name:t.name,size:t.size,type:t.type};this.files.push(s),r.currentSize+=s.size,this.onChange(this.files),this.writeValue(null)})}writeValue(e){console.log("host "+this.host),this.host.nativeElement.querySelector("input").value="",this.file=null}registerOnChange(e){this.onChange=e}registerOnTouched(e){}clearInputImage(e){this.files=this.files.filter(t=>t.size!==e.size),this.onChange(this.files),this.currentSize-=e.size}getCurrentSize(){return this.currentSize}}return e.\u0275fac=function(t){return new(t||e)(n.Jb(n.l),n.Jb(o.a))},e.\u0275cmp=n.Db({type:e,selectors:[["app-file-upload"]],hostBindings:function(e,t){1&e&&n.Tb("change",function(e){return t.emitFiles(e.target.files)})},features:[n.yb([{provide:s.f,useExisting:e,multi:!0}])],decls:3,vars:1,consts:[[1,"row"],["class","col justify-content-start","style","position: relative",4,"ngFor","ngForOf"],["type","file","accept","image/jpeg, image/png"],[1,"col","justify-content-start",2,"position","relative"],["alt","vehicule image",2,"max-height","100px",3,"src"],["type","button",1,"btn","btn-secondary","btn-xs","pull-right",2,"position","absolute","left","10px",3,"click"]],template:function(e,t){1&e&&(n.Mb(0,"div",0),n.dc(1,l,4,1,"div",1),n.Lb(),n.Kb(2,"input",2)),2&e&&(n.zb(1),n.Wb("ngForOf",t.files))},directives:[a.h],encapsulation:2}),e})()},HzuS:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var s=r("HDdC"),i=r("fXoL");let n=(()=>{class e{byteSize(e){return this.formatAsBytes(this.size(e))}openFile(e,t){if(t=null!=t?t:"",window.navigator.msSaveOrOpenBlob){const r=atob(e),s=new Array(r.length);for(let e=0;e<r.length;e++)s[e]=r.charCodeAt(e);const i=new Uint8Array(s),n=new Blob([i],{type:t});window.navigator.msSaveOrOpenBlob(n)}else{const r=`data:${t};base64,${e}`,s=window.open();null==s||s.document.write('<iframe src="'+r+'" frameborder="0" style="border:0; top:0; left:0; bottom:0; right:0; width:100%; height:100%;" allowfullscreen></iframe>')}}loadFileToForm(e,t,r,i){return new s.a(s=>{var n;const o=e.target;if(null===(n=null==o?void 0:o.files)||void 0===n?void 0:n[0]){const e=o.files[0];if(i&&!e.type.startsWith("image/"))s.error({message:`File was expected to be an image but was found to be '${e.type}'`,key:"not.image",params:{fileType:e.type}});else{const i=r+"ContentType";this.toBase64(e,n=>{t.patchValue({[r]:n,[i]:e.type}),s.next(),s.complete()})}}else s.error({message:"Could not extract file",key:"could.not.extract",params:{event:e}})})}toBase64(e,t){const r=new FileReader;r.onload=e=>{var r;if("string"==typeof(null===(r=e.target)||void 0===r?void 0:r.result)){const r=e.target.result.substr(e.target.result.indexOf("base64,")+"base64,".length);t(r)}},r.readAsDataURL(e)}endsWith(e,t){return t.includes(e,t.length-e.length)}paddingSize(e){return this.endsWith("==",e)?2:this.endsWith("=",e)?1:0}size(e){return e.length/4*3-this.paddingSize(e)}formatAsBytes(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")+" bytes"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"Vx+w":function(e,t,r){"use strict";r.d(t,"a",function(){return s});const s={filetoupload:{maxsize:24e6}}},fCgo:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var s=r("tk/3");class i{constructor(e){if(this.formService=e,this.isFormSent=!1,this.isEmailSent=!1,this.progress=0,this.errorServer=!1,this.constructor===i)throw new TypeError('Abstract class "AbstractDemandeComponent" cannot be instantiated directly')}save(){this.formService.save(this.createFromForm()).subscribe(e=>{switch(this.isFormSent=!0,e.type){case s.c.Sent:console.log("Request has been made!");break;case s.c.ResponseHeader:console.log("Response header has been received!");break;case s.c.UploadProgress:this.progress=Math.round(e.loaded/e.total*100),console.log(`Uploaded! ${this.progress}%`);break;case s.c.Response:console.log("User successfully created!",e.body),setTimeout(()=>{this.progress=0},1500)}},()=>{this.isFormSent=!0,this.progress=-1,this.errorServer=!0},()=>{this.isFormSent=!0,this.isEmailSent=!0})}createFromForm(){throw new Error("You must implement this function")}}},mCgX:function(e,t,r){"use strict";r.d(t,"a",function(){return d});var s=r("fXoL"),i=r("ofXK");function n(e,t){if(1&e&&(s.Mb(0,"div",4),s.Kb(1,"div",5),s.Lb()),2&e){const e=s.Vb();s.zb(1),s.cc("width",e.progress,"%")}}function o(e,t){1&e&&(s.Mb(0,"div",6),s.ec(1," Connection au serveur en cours. Veuillez patienter... "),s.Lb())}function a(e,t){1&e&&(s.Mb(0,"div",4),s.Kb(1,"div",7),s.Lb()),2&e&&(s.zb(1),s.cc("width",100,"%"))}function l(e,t){1&e&&(s.Mb(0,"div",8),s.ec(1," Merci pour ta demande, ton formulaire a bien \xe9t\xe9 enregistr\xe9. Tu recevras un message de confirmation sur ton adresse email dans les plus brefs d\xe9lais."),s.Kb(2,"br"),s.ec(3," \xc0 bient\xf4t ! "),s.Lb())}function c(e,t){1&e&&(s.Mb(0,"div",4),s.Kb(1,"div",9),s.Lb()),2&e&&(s.zb(1),s.cc("width",100,"%"))}function u(e,t){1&e&&(s.Mb(0,"div",10),s.ec(1," Il y a eu un probl\xe8me lors du traitement de votre demande, le formulaire n'a pas pu \xeatre envoy\xe9."),s.Kb(2,"br"),s.ec(3," R\xe9essayez plus tard, ou envoyez directement votre requ\xeate par mail \xe0 l'artiste. "),s.Lb())}let d=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Db({type:e,selectors:[["app-form-footer"]],inputs:{errorServer:"errorServer",progress:"progress",isFormSent:"isFormSent",isEmailSent:"isEmailSent"},decls:6,vars:6,consts:[["class","progress form-group",4,"ngIf"],["class","alert alert-primary","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"progress","form-group"],["role","progressbar",1,"progress-bar","progress-bar-striped"],["role","alert",1,"alert","alert-primary"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-success"],["role","alert",1,"alert","alert-success"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-danger"],["role","alert",1,"alert","alert-danger"]],template:function(e,t){1&e&&(s.dc(0,n,2,2,"div",0),s.dc(1,o,2,0,"div",1),s.dc(2,a,2,2,"div",0),s.dc(3,l,4,0,"div",2),s.dc(4,c,2,2,"div",0),s.dc(5,u,4,0,"div",3)),2&e&&(s.Wb("ngIf",t.isFormSent&&!t.isEmailSent&&!t.errorServer&&t.progress>0),s.zb(1),s.Wb("ngIf",t.isFormSent&&!t.isEmailSent&&!t.errorServer),s.zb(1),s.Wb("ngIf",t.isEmailSent),s.zb(1),s.Wb("ngIf",t.isEmailSent),s.zb(1),s.Wb("ngIf",-1===t.progress),s.zb(1),s.Wb("ngIf",t.errorServer))},directives:[i.i],styles:[""]}),e})()},"md+p":function(e,t,r){"use strict";r.d(t,"a",function(){return a});var s=r("tk/3"),i=r("HDdC"),n=r("JIr8"),o=r("fXoL");let a=(()=>{class e{constructor(e){this.http=e}save(e){return this.http.post("/api/form",e,{reportProgress:!0,observe:"events",headers:new s.d({"Access-Control-Allow-Origin":"*"})}).pipe(Object(n.a)(this.errorMgmt))}errorMgmt(e){let t="";return t=e.error instanceof ErrorEvent?e.error.message:`Error Code: ${e.status}\nMessage: ${e.message}`,console.log(t),function(e,t){return new i.a(t=>t.error(e))}(t)}}return e.\u0275fac=function(t){return new(t||e)(o.Qb(s.a))},e.\u0275prov=o.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},obgo:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var s=r("Vx+w");function i(){return e=>{let t=0,r=[],i=null;for(const n in e.controls)if(n.startsWith("images")){const o=e.get(n);r.push(o),o.value&&(o.value.forEach(e=>{t+=e.size}),t>s.a.filetoupload.maxsize&&(i={filesCapacityLimited:{value:"Config.filetoupload.maxsize"}}))}return r&&r.forEach(e=>{e.pristine||e.setErrors(i)}),i}}}}]);