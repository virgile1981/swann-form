"use strict";(self.webpackChunkswann_form=self.webpackChunkswann_form||[]).push([[592],{9698:(h,m,a)=>{a.d(m,{D:()=>t});const t={filetoupload:{maxsize:24e6}}},3522:(h,m,a)=>{a.d(m,{a:()=>p});var t=a(3438);class p{constructor(u){if(this.formService=u,this.isFormSent=!1,this.isEmailSent=!1,this.progress=0,this.errorServer=!1,this.constructor===p)throw new TypeError('Abstract class "AbstractDemandeComponent" cannot be instantiated directly')}save(){this.formService.save(this.createFromForm()).subscribe(u=>{switch(this.isFormSent=!0,u.type){case t.dt.Sent:console.log("Request has been made!");break;case t.dt.ResponseHeader:console.log("Response header has been received!");break;case t.dt.UploadProgress:this.progress=Math.round(u.loaded/u.total*100),console.log(`Uploaded! ${this.progress}%`);break;case t.dt.Response:console.log("User successfully created!",u.body),setTimeout(()=>{this.progress=0},1500)}},()=>{this.isFormSent=!0,this.progress=-1,this.errorServer=!0},()=>{this.isFormSent=!0,this.isEmailSent=!0})}createFromForm(){throw new Error("You must implement this function")}}},3744:(h,m,a)=>{a.d(m,{W:()=>n});var t=a(5127),p=a(8315);function s(e,o){if(1&e&&(t.TgZ(0,"div",4),t._UZ(1,"div",5),t.qZA()),2&e){const d=t.oxw();t.xp6(1),t.Udp("width",d.progress,"%")}}function u(e,o){1&e&&(t.TgZ(0,"div",6),t._uU(1," Connection au serveur en cours. Veuillez patienter... "),t.qZA())}function f(e,o){1&e&&(t.TgZ(0,"div",4),t._UZ(1,"div",7),t.qZA()),2&e&&(t.xp6(1),t.Udp("width",100,"%"))}function i(e,o){1&e&&(t.TgZ(0,"div",8),t._uU(1," Merci pour ta demande, ton formulaire a bien \xe9t\xe9 enregistr\xe9. Tu recevras un message de confirmation sur ton adresse email dans les plus brefs d\xe9lais."),t._UZ(2,"br"),t._uU(3," \xc0 bient\xf4t ! "),t.qZA())}function l(e,o){1&e&&(t.TgZ(0,"div",4),t._UZ(1,"div",9),t.qZA()),2&e&&(t.xp6(1),t.Udp("width",100,"%"))}function r(e,o){1&e&&(t.TgZ(0,"div",10),t._uU(1," Il y a eu un probl\xe8me lors du traitement de votre demande, le formulaire n'a pas pu \xeatre envoy\xe9."),t._UZ(2,"br"),t._uU(3," R\xe9essayez plus tard, ou envoyez directement votre requ\xeate par mail \xe0 l'artiste. "),t.qZA())}let n=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(d){return new(d||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-form-footer"]],inputs:{errorServer:"errorServer",progress:"progress",isFormSent:"isFormSent",isEmailSent:"isEmailSent"},decls:6,vars:6,consts:[["class","progress form-group",4,"ngIf"],["class","alert alert-primary","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"progress","form-group"],["role","progressbar",1,"progress-bar","progress-bar-striped"],["role","alert",1,"alert","alert-primary"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-success"],["role","alert",1,"alert","alert-success"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-danger"],["role","alert",1,"alert","alert-danger"]],template:function(d,c){1&d&&(t.YNc(0,s,2,2,"div",0),t.YNc(1,u,2,0,"div",1),t.YNc(2,f,2,2,"div",0),t.YNc(3,i,4,0,"div",2),t.YNc(4,l,2,2,"div",0),t.YNc(5,r,4,0,"div",3)),2&d&&(t.Q6J("ngIf",c.isFormSent&&!c.isEmailSent&&!c.errorServer&&c.progress>0),t.xp6(1),t.Q6J("ngIf",c.isFormSent&&!c.isEmailSent&&!c.errorServer),t.xp6(1),t.Q6J("ngIf",c.isEmailSent),t.xp6(1),t.Q6J("ngIf",c.isEmailSent),t.xp6(1),t.Q6J("ngIf",-1===c.progress),t.xp6(1),t.Q6J("ngIf",c.errorServer))},directives:[p.O5],styles:[""]}),e})()},9006:(h,m,a)=>{a.d(m,{A:()=>s});var t=a(2394),p=a(5127);let s=(()=>{class u{byteSize(i){return this.formatAsBytes(this.size(i))}openFile(i,l){if(l=null!=l?l:"",window.navigator.msSaveOrOpenBlob){const r=atob(i),n=new Array(r.length);for(let d=0;d<r.length;d++)n[d]=r.charCodeAt(d);const e=new Uint8Array(n),o=new Blob([e],{type:l});window.navigator.msSaveOrOpenBlob(o)}else{const r=`data:${l};base64,${i}`,n=window.open();null==n||n.document.write('<iframe src="'+r+'" frameborder="0" style="border:0; top:0; left:0; bottom:0; right:0; width:100%; height:100%;" allowfullscreen></iframe>')}}loadFileToForm(i,l,r,n){return new t.y(e=>{var o;const d=i.target;if(null===(o=null==d?void 0:d.files)||void 0===o?void 0:o[0]){const c=d.files[0];if(n&&!c.type.startsWith("image/"))e.error({message:`File was expected to be an image but was found to be '${c.type}'`,key:"not.image",params:{fileType:c.type}});else{const g=r+"ContentType";this.toBase64(c,_=>{l.patchValue({[r]:_,[g]:c.type}),e.next(),e.complete()})}}else e.error({message:"Could not extract file",key:"could.not.extract",params:{event:i}})})}toBase64(i,l){const r=new FileReader;r.onload=n=>{var e;if("string"==typeof(null===(e=n.target)||void 0===e?void 0:e.result)){const o=n.target.result.substr(n.target.result.indexOf("base64,")+"base64,".length);l(o)}},r.readAsDataURL(i)}endsWith(i,l){return l.includes(i,l.length-i.length)}paddingSize(i){return this.endsWith("==",i)?2:this.endsWith("=",i)?1:0}size(i){return i.length/4*3-this.paddingSize(i)}formatAsBytes(i){return i.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")+" bytes"}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275prov=p.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},1177:(h,m,a)=>{a.d(m,{o:()=>l});var t=a(3438),p=a(2394);var f=a(2593),i=a(5127);let l=(()=>{class r{constructor(e){this.http=e}save(e){return this.http.post("/api/form",e,{reportProgress:!0,observe:"events",headers:new t.WM({"Access-Control-Allow-Origin":"*"})}).pipe((0,f.K)(this.errorMgmt))}errorMgmt(e){let o="";return o=e.error instanceof ErrorEvent?e.error.message:`Error Code: ${e.status}\nMessage: ${e.message}`,console.log(o),function(r,n){return new p.y(e=>e.error(r))}(o)}}return r.\u0275fac=function(e){return new(e||r)(i.LFG(t.eN))},r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},7611:(h,m,a)=>{a.d(m,{Y:()=>l});var t=a(7e3),p=a(9698),s=a(5127),u=a(9006),f=a(8315);function i(r,n){if(1&r){const e=s.EpF();s.TgZ(0,"div",3),s._UZ(1,"img",4),s.TgZ(2,"button",5),s.NdJ("click",function(){const c=s.CHM(e).$implicit;return s.oxw().clearInputImage(c)}),s._uU(3," x "),s.qZA(),s.qZA()}if(2&r){const e=n.$implicit;s.xp6(1),s.Q6J("src","data:"+e.type+";base64,"+e.buffer,s.LSH)}}let l=(()=>{class r{constructor(e,o){this.host=e,this.dataUtils=o,this.file=null,this.limitSize=p.D.filetoupload.maxsize,this.currentSize=0,this.showError=!1,this.files=[]}emitFiles(e){const o=e&&e.item(0),d=this;this.dataUtils.toBase64(o,c=>{const g={lastMod:o.lastModified,buffer:c,name:o.name,size:o.size,type:o.type};this.files.push(g),d.currentSize+=g.size,this.onChange(this.files),this.writeValue(null)})}writeValue(e){console.log("host "+this.host),this.host.nativeElement.querySelector("input").value="",this.file=null}registerOnChange(e){this.onChange=e}registerOnTouched(e){}clearInputImage(e){this.files=this.files.filter(o=>o.size!==e.size),this.onChange(this.files),this.currentSize-=e.size}getCurrentSize(){return this.currentSize}}return r.\u0275fac=function(e){return new(e||r)(s.Y36(s.SBq),s.Y36(u.A))},r.\u0275cmp=s.Xpm({type:r,selectors:[["app-file-upload"]],hostBindings:function(e,o){1&e&&s.NdJ("change",function(c){return o.emitFiles(c.target.files)})},features:[s._Bn([{provide:t.JU,useExisting:r,multi:!0}])],decls:3,vars:1,consts:[[1,"row"],["class","col justify-content-start","style","position: relative",4,"ngFor","ngForOf"],["type","file","accept","image/jpeg, image/png"],[1,"col","justify-content-start",2,"position","relative"],["alt","vehicule image",2,"max-height","100px",3,"src"],["type","button",1,"btn","btn-secondary","btn-xs","pull-right",2,"position","absolute","left","10px",3,"click"]],template:function(e,o){1&e&&(s.TgZ(0,"div",0),s.YNc(1,i,4,1,"div",1),s.qZA(),s._UZ(2,"input",2)),2&e&&(s.xp6(1),s.Q6J("ngForOf",o.files))},directives:[f.sg],encapsulation:2}),r})()},4683:(h,m,a)=>{a.d(m,{A:()=>p});var t=a(9698);function p(){return s=>{let u=0,f=[],i=null;for(const l in s.controls)if(l.startsWith("images")){const r=s.get(l);f.push(r),r.value&&(r.value.forEach(n=>{u+=n.size}),u>t.D.filetoupload.maxsize&&(i={filesCapacityLimited:{value:"Config.filetoupload.maxsize"}}))}return f&&f.forEach(l=>{l.pristine||l.setErrors(i)}),i}}}}]);